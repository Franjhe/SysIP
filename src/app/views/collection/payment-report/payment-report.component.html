
    <div style="background-color: #003478;height: 30vh;" class="container-fluid pb-5 pt-5 ">
        <img 
        src="assets/img/brand/logo-white.png" alt=""
        widt="250" 
        height="100 " 
        style="   
            z-index: 4;
            position: sticky;
            left: 28px;
            margin-top: -35px;
            "
        >
    </div>

    <div class="card container col-lg-12" style="margin-top: -7.5rem">
      <div class="text-center">
        <h1>Reporte de Pago</h1>
        <h3>
            Estimado usuario,

            Para garantizar una correcta identificación de tu pago, te solicitamos seguir los siguientes pasos:
        </h3>
    </div>
      <mat-stepper linear #stepper>

        <mat-step [stepControl]="searchReceipt" >
          <form [formGroup]="searchReceipt">
            <ng-template matStepLabel>Consulte sus recibos pendientes</ng-template>
              <div class="container row">
                <div class="col-lg-4 p-5 mt-5">
                  <mat-form-field>
                    <mat-label>Cedula</mat-label>
                    <input matInput type="number"  formControlName="xcedula" placeholder="Ingrese su numero de cedula o rif " required>
                  </mat-form-field> 
                </div>
                <div class="col-lg-5">
                  <div class="col-lg-7 text-center">
                    <img style="height: 40vh;" src="assets/img/brand/payment-report.avif">
                  </div>
                </div>

              </div>
            <div>
              <button mat-button matStepperNext (click)="searchDataReceipt()">Siguiente</button>
            </div>
          </form>
        </mat-step>

        <mat-step [stepControl]="searchReceipt" >
          <form [formGroup]="searchReceipt">
            <ng-template matStepLabel>Seleccione los recibos pendientes que desea cancelar</ng-template>

            <h1> Estimado </h1>
            <h1><strong>{{cliente}}</strong></h1>
            <h1> Sus recibos pendientes </h1>

            <div formArrayName="receipt" >
              <table class="table border">
                <thead>
                  <tr>
                    <th>N° Poliza</th>
                    <th>Ramo</th>
                    <th>Fecha Desde</th>
                    <th>Fecha Hasta</th>
                    <th>Total del recibo</th>
                    <th>Seleccione los recibos a pagar </th>
                  </tr>
                </thead>
                <tbody *ngFor="let creds of receipt.value let i=index">
                  <tr [formGroupName]="i">
                    <td >{{creds.cnpoliza}}</td>
                    <td >{{creds.xramo}}</td>
                    <td>{{creds.fdesde_rec}}</td>
                    <td > {{creds.fhasta_rec}}</td>
                    <td >{{creds.mprimabrutaext}} {{creds.cmoneda}}</td>
                    <td>
                      <mat-checkbox formControlName="seleccionado" (change)="calculateMount(i)"> </mat-checkbox>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="container text-center">
                <h2>Tasa de cobro {{bcv}} Bs</h2> 
                <h2>Total a Pagar {{mount}} $  -- {{mountBs}} Bs</h2>
            </div>

            <div>
              <button mat-button matStepperPrevious>Atras</button>
              <button mat-button matStepperNext>Siguiente</button>
            </div>

          </form>
        </mat-step>

        <mat-step>
          <ng-template matStepLabel>Identifica los números de cuenta a los cuales realizarás la transferencia</ng-template>
          <div class="row text-center">
            <h1>Nuestras Cuentas Bancarias</h1>

            <h3>
                Por favor, identifica claramente los números de cuenta a los cuales realizarás la transferencia.
                 Asegúrate de verificar cuidadosamente cada dígito para evitar errores.
            </h3>

            <div class="col-lg-6">
              <div class="card pb-4">
                <h3><strong>Cuentas Nacionales </strong>    </h3>
                <p class="text-start">
                  <strong>BANESCO </strong>                         0134 0371 61 3711015662 <br>
                  <strong>BANPLUS</strong>                         0174 0131 96 1314500040 <br>
                  <strong>BANCAMIGA</strong>                       0172 0111 53 1118494549 <br>
                  <strong>BANCO NACIONAL DE CREDITO </strong>      0191 0098 73 2198370018 <br>
                  <strong>BANCO DE VENEZUELA </strong>             0102 0762 21 0000100104 <br>
                  <strong>BANCO PLAZA</strong>                     0138 0040 59 0400012987
                </p>
              </div>

            </div>

            <div class="col-lg-6">
              <div class="card pb-1">
                <h3><strong> Cuentas internacionales</strong> </h3>
                <p class="text-start">
                  <strong>Beneficiary</strong>     Bee Insurance Managemen LLC <br>
                  <strong>Bank </strong>           Well Fargo <br>
                  <strong>Address</strong>         1110 Brickell Ave Suite 406 Miami Fl 33131-3135 <br>
                  <strong>Account</strong>         3814894881 <br>
                  <strong>Routing Number</strong>  063107513 <br>
                  <strong>Swift </strong>          WFBIUS6SXXX <br>
                  <strong>Zelle </strong>          paymentslamundial@gmail.com
                </p>
              </div>
            </div>



          </div>
          <div class="mt-5">
            <button mat-button matStepperPrevious>Atras</button>
            <button mat-button matStepperNext>Siguiente</button>
 
          </div>
        </mat-step>

        <mat-step [stepControl]="searchReceipt" >
          <form [formGroup]="searchReceipt">
            <ng-template matStepLabel>Confirmacion</ng-template>
            <div class="text-center container">
              <h1>Confirmación</h1>
              <h3>
                  Una vez hayas completado la transferencia, adjunta el comprobante de pago para que podamos procesar tu transacción de manera rápida y precisa. 
                  Puedes adjuntar imágenes o archivos PDF del comprobante.  <br>   
                  <strong>Para reportar tu pago debes transferir un TOTAL de  
                    <h1 class="bold mt-4" style="font-size:2.5rem">{{mount}} $   --- {{mountBs}} Bs</h1></strong>   
                    <br>
                  <strong>En caso de no coincidir los montos su reporte pasara a supervición. </strong>             
              </h3>

              <div class="form-group mb-3 row" style="place-content: space-around;">
                <h3>Por favor ingreser el monto exacto de su deposito junto a su Screenshot </h3>

                <!-- array con datos de las transferencias  -->
                <div *ngFor="let creds of transfer.controls let i=index">
                  <div [formGroupName]="i" class="row justify-content-center">

                    <div class="col-lg-4">
                        <div class="form-outline" >
                          <select formControlName="cmoneda" class="form-control rounded-input form-control-lg colorgris" (change)="validateCoin(i)">
                            <option *ngFor="let coin of coinList" value="{{ coin.id }}">{{ coin.id }}</option>
                          </select>                     
                        </div>

                        <div class="form-outline mt-3" >
                          <select formControlName="cbanco" class="form-control rounded-input form-control-lg colorgris">
                            <option *ngFor="let backE of backEmitter" value="{{ backE.id }}">{{ backE.value }}</option>
                          </select>                     
                        </div>

                        <div class="form-outline mt-3" *ngIf="!viewBank">
                          <select formControlName="cbanco_destino" class="form-control rounded-input form-control-lg colorgris">
                            <option *ngFor="let backR of backReceptors" value="{{ backR.id }}">{{ backR.value }}</option>
                          </select>                     
                        </div>

                        <div class="form-outline mt-3" *ngIf="viewBank">
                          <select formControlName="cbanco_destino" class="form-control rounded-input form-control-lg colorgris">
                            <option *ngFor="let backR of bankList" value="{{ backR.id }}">{{ backR.value }}</option>
                          </select>                     
                        </div>

                    </div>

                    <div class="col-lg-4">

                      <input  type="text"  class="form-control rounded-input " placeholder="Ingresar monto depositado" formControlName="mpago" (change)="validateMount(i)">

                      <input  type="text"  class="form-control rounded-input mt-3" placeholder="Ingrese la referencia" formControlName="xreferencia">

                      <input type="file"  class="form-control rounded-input mt-3" name="ximagen" formControlName="ximagen" (change)="onFileSelect($event ,i)" #Ximagen>

                    </div>

                    <div>
                      <button mat-button  (click)="addPayment()">Anadir movimiento</button>

                      <button mat-button  (click)="removePayment(i)">Eliminar movimiento</button>
                    </div>
  
                  </div>

                </div>

              </div>

            </div>
            <div class="mt-5">
              <button mat-button matStepperPrevious>Atras</button>
              <button mat-button (click)="stepper.reset()">Reset</button>
              <button mat-button  (click)="onSubmit()">Registrar Pago</button>
            </div>
          </form >
        </mat-step>

      </mat-stepper>

        <div class="text-center p-3">
          <h2>
              Una vez hayamos recibido tu información y verificado el pago, te enviaremos una confirmación por correo electrónico.

              Agradecemos tu colaboración. Si tienes alguna pregunta o necesitas asistencia adicional, no dudes en ponerte en contacto con nuestro equipo de soporte.
              
              ¡Gracias por tu confianza!
              
              Atentamente,                   
            </h2>
          <h2>La Mundial de Seguros</h2> 
        </div>

        <ng-template #Alerta >
          <mat-dialog-content  >
            
            <div class="card">
              <div class="header">
                <div class="image">
                  <svg viewbox="0 0 25 25" xmlns="http://www.w3.org/2000/svg">
                  <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                  <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                  <g id="SVGRepo_iconCarrier">
                    <path d="M20 7L9.00004 18L3.99994 13" stroke="#000000" stroke-linecap="round" stroke-linejoin="round" stroke-width="8.5"></path>
                  </g></svg>
                </div>
                <div class="content">
                  <h2 class="title">Pago registrado</h2>
                  <h4>Valide todos los campos antes de registrar el anticipo</h4>
    
                </div>
              </div>
            </div>
    
    
          </mat-dialog-content>
        </ng-template>

        <ng-template #NotFound >
          <mat-dialog-content  >
              <div class="header">
                <div class="content">
                  <h2 class="title">Cliente no encontrado</h2>
                  <h4>Valide sus datos</h4>
    
                </div>
              </div>
          </mat-dialog-content>
        </ng-template>
    </div>



