<div class="card container-fluid">

  <div class="text-center">
    <h1>Consulta de Pólizas</h1>
  </div>
  <!-- <div class="text-center">
    <h3>Ingrese Datos de la Póliza</h3>
  </div> -->

    <mat-stepper [linear]="isLinear" #stepper>
    <mat-step [stepControl]="firstFormGroup">
      <form [formGroup]="firstFormGroup">
        <ng-template matStepLabel>Selección de Póliza</ng-template>

        <mat-form-field class="mat-form-field-lg">
          <mat-label>Buscar</mat-label>
          <input matInput (keyup)="applyFilter($event)" #input>
        </mat-form-field>
        
        <div class="mat-elevation-z8">
          <table mat-table [dataSource]="dataSource">
            
            <ng-container matColumnDef="select">
              <th mat-header-cell *matHeaderCellDef>
                <mat-checkbox (change)="$event ? masterToggle(null) : null"
                              [checked]="selection.hasValue() && isAllSelected()"
                              [indeterminate]="selection.hasValue() && !isAllSelected()">
                </mat-checkbox>
              </th>
              <td mat-cell *matCellDef="let row">
                <mat-checkbox (click)="$event.stopPropagation()" (change)="$event ? masterToggle(row) : null"
                              [checked]="selection.isSelected(row)">
                </mat-checkbox>
              </td>
            </ng-container>
            
            <!-- Position Column -->
            <ng-container matColumnDef="Nro_Poliza">
              <th mat-header-cell *matHeaderCellDef> Póliza </th>
              <td mat-cell *matCellDef="let element"> {{element.Nro_Poliza}}
              </td>
            </ng-container>
            <!-- Name Column -->
            <ng-container matColumnDef="Descripcion_Ramo">
              <th mat-header-cell *matHeaderCellDef> Ramo </th>
              <td mat-cell *matCellDef="let element">
                {{element.Descripcion_Ramo}} </td>
            </ng-container>
            <ng-container matColumnDef="Sucursal">
              <th mat-header-cell *matHeaderCellDef> Sucursal </th>
              <td mat-cell *matCellDef="let element"> {{element.Sucursal}} </td>
            </ng-container>
            <ng-container matColumnDef="Intermediario">
              <th mat-header-cell *matHeaderCellDef> Intermediario </th>
              <td mat-cell *matCellDef="let element"> {{element.Intermediario}}
              </td>
            </ng-container>
            <ng-container matColumnDef="Dias_de_vigencia">
              <th mat-header-cell *matHeaderCellDef> Vigencia </th>
              <td mat-cell *matCellDef="let element">
                {{element.Dias_de_vigencia}} Días</td>
            </ng-container>
            <ng-container matColumnDef="Nombre_Asegurado">
              <th mat-header-cell *matHeaderCellDef> Asegurado </th>
              <td mat-cell *matCellDef="let element">
                {{element.Nombre_Asegurado}} </td>
            </ng-container>

            <ng-container matColumnDef="Id_Asegurado">
              <th mat-header-cell *matHeaderCellDef> Identificación </th>
              <td mat-cell *matCellDef="let element"> {{element.Id_Asegurado}}
              </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          </table>
          <mat-paginator [pageSizeOptions]="[5, 10, 25, 50, 100]"
            showFirstLastButtons
            aria-label="Seleccione página">
          </mat-paginator>
        </div>

        <br>
        <div>
          <button class="align-right-button" mat-flat-button color="primary" mat-button matStepperNext (click)="pruebaDialog()"> 
            Siguiente
          </button>
        </div>
      </form>
    </mat-step>

    <mat-step [stepControl]="secondFormGroup" label="Información de la Póliza">

      <form [formGroup]="secondFormGroup">
        <mat-form-field class="medium">
          <mat-label>Nro. Póliza:</mat-label>
          <span class="readonly-input">
            <input matInput 
            #nroPolizaInput 
            readonly>
          </span>
        </mat-form-field>

        <mat-form-field>
          <mat-label>C.I. Tomador:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #ciTomadorInput
              readonly>
          </span>
        </mat-form-field>
        
        <mat-form-field class="specific2">
          <mat-label>Tomador:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #tomadorInput
              readonly>
          </span>
        </mat-form-field>
         
        <mat-form-field>
          <mat-label>Código del Ramo:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #codigoRamoInput
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>C.I. Asegurado:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #ciAseguradoInput
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>Asegurado:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #nombreAseguradoInput
              readonly>
          </span>
        </mat-form-field>
        
        <mat-form-field>
          <mat-label>Descripción del Ramo:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #descripcionRamo
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>C.I. Beneficiario:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #ciBeneficiarioInput
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>Beneficiario:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #nombreBeneficiarioInput
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>Fecha desde Póliza:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #FechaDesdePol
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="menosmedium">
          <mat-label>Fecha hasta Póliza:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #FechaHastaPol
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Vigencia de Póliza:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #Vigencia
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field class="specific">
          <mat-label>Sucursal:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #Sucursal
              readonly>
          </span>
        </mat-form-field>
        
        <mat-form-field class = "specific3">
          <mat-label>Intermediario:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #Intermediario
              readonly>
          </span>
        </mat-form-field>

        <mat-form-field>
          <mat-label>Productor:</mat-label>
          <span class="readonly-input">
            <input matInput 
              #Productor
              readonly>
          </span>
        </mat-form-field>
        
        <mat-form-field class="totalwidth">
          <mat-label>Observaciones:</mat-label>
          <textarea matInput 
          #Observacion
          readonly>
          </textarea>
        </mat-form-field>
        <div>
          <button *ngIf="showButton" 
                    (click)="buscarReporte()"
                    [disabled]="!showButton" mat-raised-button
                    class="mat-raised-button"
                    style="color: #fff; background-color: #db2a13fb;"
                    >Cuadro Póliza
          </button>
          <!-- <button class="align-right-button" mat-flat-button color = "warn" mat-button matStepperNext>Siguiente</button> -->
          <button class="align-right-button" mat-flat-button color = "warn" mat-button matStepperPrevious>Regresar</button>
        </div>
      </form>
    </mat-step>

    <!-- <mat-step>
      <ng-template matStepLabel>Procesar Información</ng-template>
      <div>
        <br>
        <button class="align-right-button" mat-flat-button color="primary" mat-button (click)="stepper.reset()">Inicio</button>
        <button class="align-right-button" mat-flat-button color="warn" mat-button matStepperPrevious>Regresar</button>
      </div>
    </mat-step> -->
  </mat-stepper>
